diff --git a/codec/encode.c b/codec/encode.c
index 98c6059..cae7e31 100644
--- a/codec/encode.c
+++ b/codec/encode.c
@@ -23,8 +23,8 @@ enum {
 // Calculate codebook vectors for one predictor, given the predictor
 // coefficients.
 static void vadpcm_make_vectors(
-    const double coeff[restrict static 2],
-    struct vadpcm_vector vectors[restrict static 2]) {
+    const double coeff[VADPCM_RESTRICT_STATIC 2],
+    struct vadpcm_vector vectors[VADPCM_RESTRICT_STATIC 2]) {
     double scale = (double)(1 << 11);
     for (int i = 0; i < 2; i++) {
         double x1 = 0.0, x2 = 0.0;
diff --git a/codec/predictor.c b/codec/predictor.c
index 96d8983..49ea7a4 100644
--- a/codec/predictor.c
+++ b/codec/predictor.c
@@ -27,11 +27,11 @@ enum {
     kVADPCMIterations = 20,
 };
 
-float vadpcm_eval(const float corr[restrict static 6],
-                  const float coeff[restrict static 2]);
+float vadpcm_eval(const float corr[VADPCM_RESTRICT_STATIC 6],
+                  const float coeff[VADPCM_RESTRICT_STATIC 2]);
 
-double vadpcm_eval_solved(const double corr[restrict static 6],
-                          const double coeff[restrict static 2]);
+double vadpcm_eval_solved(const double corr[VADPCM_RESTRICT_STATIC 6],
+                          const double coeff[VADPCM_RESTRICT_STATIC 2]);
 
 void vadpcm_best_error(size_t frame_count, const float (*restrict corr)[6],
                        float *restrict best_error) {
@@ -78,8 +78,8 @@ void vadpcm_meancorrs(size_t frame_count, int predictor_count,
     }
 }
 
-void vadpcm_solve(const double corr[restrict static 6],
-                  double coeff[restrict static 2]) {
+void vadpcm_solve(const double corr[VADPCM_RESTRICT_STATIC 6],
+                  double coeff[VADPCM_RESTRICT_STATIC 2]) {
     // For the autocorrelation matrix A, we want vector v which minimizes the
     // residual \epsilon,
     //
diff --git a/codec/predictor.h b/codec/predictor.h
index f49270e..6c37044 100644
--- a/codec/predictor.h
+++ b/codec/predictor.h
@@ -17,8 +17,8 @@
 
 // Calculate the square error, given an autocorrelation matrix and predictor
 // coefficients.
-inline float vadpcm_eval(const float corr[restrict static 6],
-                         const float coeff[restrict static 2]) {
+inline float vadpcm_eval(const float corr[VADPCM_RESTRICT_STATIC 6],
+                         const float coeff[VADPCM_RESTRICT_STATIC 2]) {
     return corr[0] +                               //
            corr[2] * coeff[0] * coeff[0] +         //
            corr[5] * coeff[1] * coeff[1] +         //
@@ -28,8 +28,8 @@ inline float vadpcm_eval(const float corr[restrict static 6],
 }
 
 // Calculate the best-case error from a frame, given its solved coefficients.
-inline double vadpcm_eval_solved(const double corr[restrict static 6],
-                                 const double coeff[restrict static 2]) {
+inline double vadpcm_eval_solved(const double corr[VADPCM_RESTRICT_STATIC 6],
+                                 const double coeff[VADPCM_RESTRICT_STATIC 2]) {
     // Equivalent to vadpcm_eval(), for the case where coeff are optimal for
     // this autocorrelation matrix.
     //
@@ -62,8 +62,8 @@ void vadpcm_meancorrs(size_t frame_count, int predictor_count,
 
 // Calculate the predictor coefficients, given an autocorrelation matrix. The
 // coefficients are chosen to minimize vadpcm_eval.
-void vadpcm_solve(const double corr[restrict static 6],
-                  double coeff[restrict static 2]);
+void vadpcm_solve(const double corr[VADPCM_RESTRICT_STATIC 6],
+                  double coeff[VADPCM_RESTRICT_STATIC 2]);
 
 // Assign a predictor to each frame.
 vadpcm_error vadpcm_assign_predictors(size_t frame_count, int predictor_count,
diff --git a/codec/vadpcm.h b/codec/vadpcm.h
index 36d6f87..eee46b1 100644
--- a/codec/vadpcm.h
+++ b/codec/vadpcm.h
@@ -8,6 +8,17 @@
 #include <stddef.h>
 #include <stdint.h>
 
+#if defined(_MSC_VER) && !defined(__clang__)
+#ifndef restrict
+#define restrict __restrict
+#endif
+#define VADPCM_ALIGNAS(x) __declspec(align(x))
+#define VADPCM_RESTRICT_STATIC
+#else
+#define VADPCM_ALIGNAS(x) alignas(x)
+#define VADPCM_RESTRICT_STATIC restrict static
+#endif
+
 #ifdef __cplusplus
 #define VADPCM_RESTRICT
 extern "C" {
@@ -71,7 +82,7 @@ enum {
 
 // A vector of sample data.
 struct vadpcm_vector {
-    alignas(16) short v[kVADPCMVectorSampleCount];
+    VADPCM_ALIGNAS(16) short v[kVADPCMVectorSampleCount];
 };
 
 // Specification for a codebook.
